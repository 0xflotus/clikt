{%- assign sidebar = site.data.sidebars[page.sidebar].entries -%}

<ul id="toc">
    {%- for entry in sidebar -%}
    {%- for folder in entry.folders -%}
    <li>
        {%- assign baseurl = folder.folderitems[0].url | split: "#" -%}
        <a href="{{ baseurl[0] | remove: "/" }}">{{ folder.title }}</a>
        <ul>
            {%- for folderitem in folder.folderitems -%}
            {%- if folderitem.external_url -%}
            <li><a href="{{folderitem.external_url}}" target="_blank">{{folderitem.title}}</a></li>
            {%- else -%}
            <li><a href="{{folderitem.url | remove: "/"}}">{{folderitem.title}}</a></li>
            {%- endif -%}
            {%- endfor -%}
        </ul>
    </li>
    {%- endfor -%}
    {%- endfor -%}
</ul>
